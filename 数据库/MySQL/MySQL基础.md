# 一、数据库概述与MySQL安装

## 1、数据库概述

### Ⅰ 为什么要使用数据库

- **持久化(persistence)**：把数据保存到可掉电式存储设备中以供之后使用。大多数情况下，特别是企业级应用，**数据持久化意味着将内存中的数据保存到硬盘上加以”固化”**，而持久化的实现过程大多通过各种关系数据库来完成。
- **持久化的主要作用是**将内存中的数据存储在关系型数据库中，当然也可以存储在磁盘文件、XML数据文件中。

### Ⅱ **数据库与数据库管理系统**

1. **数据库相关概念**

   | **DB**：数据库（Database）                                   |
   | ------------------------------------------------------------ |
   | 即存储数据的“仓库”，其本质是一个文件系统。它保存了一系列有组织的数据。 |
   | **DBMS**：数据库管理系统（Database Management System）       |
   | 是一种操纵和管理数据库的大型软件，用于建立、使用和维护数据库，对数据库进行统一管理和控制。用户通过数据库管理系统访问数据库中表内的数据。 |
   | **SQL：结构化查询语言（Structured Query Language）**         |
   | 专门用来与数据库通信的语言。                                 |

2. **数据库与数据库管理系统的关系**

   - 数据库管理系统(DBMS)可以管理多个数据库，一般开发人员会针对每一个应用创建一个数据库。为保存应用中实体的数据，一般会在数据库创建多个表，以保存程序中实体用户的数据。
   
   - 数据库管理系统、数据库和表的关系如图所示：
   
     ![image-20220211155258862](https://cdn.jsdelivr.net/gh/mrsenmu/JavaLearningNotes/images/202202161657350.png)
   
   - **常见的数据库管理系统排名(DBMS)**
   
     - 目前互联网上常见的数据库管理软件有Oracle、MySQL、MS SQL Server、DB2、PostgreSQL、Access、 Sybase、Informix这几种。
     - 以下是2021年**DB-Engines Ranking** 对各数据库受欢迎程度进行调查后的统计结果：（查看数据库最新排名: **https://db-engines.com/en/ranking**）。
     
   - **常见数据库介绍**
     
     - **Oracle**：第一个商用的 RDBMS（关系型数据库管理系统）。
     - **SQL Server**：QL Server 是微软开发的大型商业数据库，诞生于 1989 年。C#、.net等语言常使用。
     - **DB2**：IBM公司的数据库产品,收费的。常应用在银行系统中。
     - **PostgreSQL**：稳定性极强，最符合SQL标准，开放源码，具备商业级DBMS质量。PG对数据量大的文本以及SQL处理较快。
     - **SyBase**：已经淡出历史舞台。提供了一个非常专业数据建模的工具PowerDesigner。
     - **SQLite**：嵌入式的小型数据库，应用在手机端。 零配置，SQlite3不用安装，不用配置，不用启动，关闭或者配置数据库实例。当系统崩溃后不用做任何恢复操作，再下次使用数据库的时候自动恢复。
     - **informix**：IBM公司出品，取自Information 和Unix的结合，它是第一个被移植到Linux上的商业数据库产品。仅运行于unix/linux平台，命令行操作。 性能较高，支持集群，适应于安全性要求极高的系统，尤其是银行，证券系统的应用。
   
3. **MySQL介绍**

   1. **概述**
      - MySQL是一个开放源代码的关系型数据库管理系统由瑞典MySQL AB（创始人Michael Widenius）公司1995年开发，迅速成为开源数据库的 No.1。
      - MySQL6.x 版本之后分为社区版和商业版。
      - MySQL是一种关联数据库管理系统，将数据保存在不同的表中，而不是将所有数据放在一个大仓库内，这样就增加了速度并提高了灵活性。
      - MySQL是可以定制的，采用了GPL（GNU General Public License)协议，你可以修改源码来开发自己的MySQL系统。
      - MySQL支持大型数据库，支持5000万条记录的数据仓库，32位系统表文件最大可支持4GB，64位系统支持最大的表文件为8TB。
      - MySQL可以允许运行于多个系统上，并且支持多种语言。这些编程语言包括C、C++、Python、Java、Perl、PHP和Ruby等。
   
   2. 为什么如此多的厂商要选用MySQL的原因：
      -  开放源代码，使用成本低。
      - 性能卓越，服务稳定。
      - 软件体积小，使用简单，并且易于维护。
      -  历史悠久，社区用户非常活跃，遇到问题可以寻求帮助。
      -  许多互联网公司在用，经过了时间的验证。
   
   3. Oracle vs MySQL
      - Oracle 更适合大型跨国企业的使用，因为他们对费用不敏感，但是对性能要求以及安全性有更高的要求。
      - MySQL 由于其**体积小、速度快、总体拥有成本低，可处理上千万条记录的大型数据库，尤其是开放源码这一特点，使得很多互联网公司、中小型网站选择了MySQL作为网站数据库**（Facebook，Twitter，YouTube，阿里巴巴/蚂蚁金服，去哪儿，美团外卖，腾讯）。
   
4.  **RDBMS 与 非RDBMS**

   从排名中我们能看出来，关系型数据库绝对是 DBMS 的主流，其中使用最多的 DBMS 分别是 Oracle、MySQL 和 SQL Server。这些都是关系型数据库（RDBMS）。

   -  **关系型数据库(RDBMS)**
     
     1.  **实质**
        - 关系型数据库模型是把复杂的数据结构归结为简单的二元关系（即二维表格形式）
        - 关系型数据库以**行(row)**和**列(column)**的形式存储数据，这一系列的行和列被称为**表(table)**，一组表组成了一个**库(database)**。
        - 表与表之间的数据记录有关系(relationship)。现实世界中的各种实体以及实体之间的各种联系均用**关系模型**。
        - SQL就是关系型数据库的查询语言。
     2. **优势**
        - **复杂查询** 可以用SQL语句方便的在一个表以及多个表之间做非常复杂的数据查询。
        - **事务支持** 使得对于安全性能很高的数据访问要求得以实现。
     
   -   **非关系型数据库(非RDBMS)**
     
     **介绍**：
     
     **非关系型数据库**可看成传统关系型数据库的功能阉割版本，基于键值对存储数据，不需要经过SQL层的解析，**性能非常高**。同时，通过减少不常用的功能，进一步提高性能。相比于 SQL，NoSQL 泛指非关系型数据库，包括了榜单上的键值型数据库、文档型数据库、搜索引擎和列存储等，除此以外还包括图形数据库。
     
     **有哪些**：
     
     ​	（1）**键值型数据库**：键值型数据库通过 Key-Value 键值的方式来存储数据，其中 Key 和 Value 可以是简单的对象，也可以是复杂的对象。Key 作为唯一的标识符，**优点**是**查找速度快**，在这方面明显优于关系型数据库，**缺点**是**无法**像关系型数据库一样使用**条件过滤**（比如 WHERE），如果你不知道去哪里找数据，就要遍历所有的键，这就会消耗大量的计算。键值型数据库典型的使用场景是作为内存缓存。**Redis**是最流行的键值型数据库。
     
     ​	（2）**文档型数据库**：此类数据库可存放并获取文档，可以是XML、JSON等格式。在数据库中文档作为处理信息的基本单位，一个文档就相当于一条记录。文档数据库所存放的文档，就相当于键值数据库所存放的“值”。**MongoDB** 是最流行的文档型数据库。
     
     ​	（3）**搜索引擎数据库**：虽然关系型数据库采用了索引提升检索效率，但是针对全文索引效率却较低。搜索引擎数据库是应用在搜索引擎领域的数据存储形式，由于搜索引擎会爬取大量的数据，并以特定的格式进行存储，这样在检索的时候才能保证性能最优。核心原理是**“倒排索引”**。典型产品：Solr、**Elasticsearch**、Splunk 等。
     
     ​	（4）**列式数据库**：是相对于行式存储的数据库，Oracle、MySQL、SQL Server 等数据库都是采用的行式存储（Row-based），而列式数据库是**将数据按照列存储到数据库中**，这样做的**好处是可以大量降低系统的I/O，适合于分布式文件系统**，不足在于功能相对有限。典型产品：HBase等。
     
     ​	（5）**图形数据库**：利用了**图这种数据结构存储了实体（对象）之间的关系**。图形数据库最典型的例子就是社交网络中人与人的关系，数据模型主要是以节点和边（关系）来实现，特点在于能高效地解决复杂的关系问题。
     图形数据库顾名思义，就是一种存储图形关系的数据库。它利用了图这种数据结构存储了实体（对象）之间的关系。关系型数据用于存储明确关系的数据，但对于复杂关系的数据存储却有些力不从心。如社交网络中人物之间的关系，如果用关系型数据库则非常复杂，用图形数据库将非常简单。典型产品：Neo4J、InfoGrid等。
     
     **NoSQL的演变**
     
     NoSQL 对 SQL 做出了很好的补充，比如**实际开发中，有很多业务需求，其实并不需要完整的关系型数据库功能**，非关系型数据库的功能就足够使用了。这种情况下，使用**性能更高、成本更低**的非关系型数据库当然是更明智的选择。比如：**日志收集、排行榜、定时器**等。
   
5.  **关系型数据库设计规则**

   - **表、记录、字段**

      - E-R（entity-relationship，实体-联系)模型中有三个主要概念是：**实体集、属性、联系集**。

      - 一个实体集（class）对应于数据库中的一个表（table），一个实体（instance）则对应于数据库表中的一行（row），也称为一条记录（record）。一个属性（attribute）对应于数据库表中的一列（column），也称为一个字段（field）。

      - ```
         ORM思想（Object Relational Mapping）体现：
         数据库中的一个表 <---> 面向对象语言中的一个类
         表中一行 <---> 类中的一个对象（或实体）
         表中一列 <---> 类中的一个字段、属性(field)
        ```

   - **表的关联关系**

      表与表之间的数据记录有关系(relationship)。现实世界中的各种实体以及实体之间的各种联系均用**关系模型**来表示。**四种：一对一关联、一对多关联、多对多关联、自我引用。**

      1. **一对一关联（one-to-one）**
         - 在实际的开发中应用不多，因为一对一可以创建成一张表。
         - 如用户信息表可拆分成用户基本信息表和用户详情表。
         - 原则：主表的主键和从表的外键（唯一），形成主外键关系，外键唯一。
      2.  **一对多关系（one-to-many）**
         - 如商品分类表和商品信息表。一个分类对应多个商品。
         - 原则：在从表(多方)创建一个字段，字段作为外键指向主表(一方)的主键。
      3. **多对多（many-to-many）**
         - 要表示多对多关系，必须**创建第三个表**，该表通常称为**联接表**，它将多对多关系划分为两个一对多关系。**将这两个表的主键都插入到第三个表中**。
         - 如：学生-课程、商品-订单、用户-角色等关系。
      4. **自我引用(Self reference)**
         - 如分类表中有id（主键）、parent_id(父级分类id)。

## 2、MySQL环境搭建（Windows环境）

详情可参考 [MySQL安装与卸载教程（Windows）](https://gitee.com/mrsenmu/JavaLearningNotes/blob/main/%E6%95%B0%E6%8D%AE%E5%BA%93/MySQL/MySQL%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA(Windows).md)

# 二、SQL与SELECT的使用

## 1、SQL语言的规则与规范



## 2、基本的SELECT语句



## 3、大类运算符



## 4、排序与分页



## 5、多表查询



## 6、单行函数



## 7、聚合函数



## 8、子查询



# 三、SQL之DDL、DML、DCL的使用

## 1、创建和管理库



## 2、创建和管理表



## 3、数据处理之增删改查



## 4、MySQL数据类型



## 5、约束



# 四、其他数据库对象

## 1、视图



## 2、存储过程



## 3、变量、流程图与游标



## 4、触发器



# 五、MySQL8.0其他新特性

## 1、窗口函数



## 2、公用表表达式